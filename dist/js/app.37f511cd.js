(function(t){function s(s){for(var i,r,o=s[0],c=s[1],l=s[2],d=0,p=[];d<o.length;d++)r=o[d],a[r]&&p.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(s);while(p.length)p.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],i=!0,o=1;o<e.length;o++){var c=e[o];0!==a[c]&&(i=!1)}i&&(n.splice(s--,1),t=r(r.s=e[0]))}return t}var i={},a={app:0},n=[];function r(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=i,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)r.d(e,i,function(s){return t[s]}.bind(null,i));return e},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var u=c;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"11a6":function(t,s,e){"use strict";var i=e("fffe"),a=e.n(i);a.a},1734:function(t,s,e){"use strict";var i=e("fde7"),a=e.n(i);a.a},"26dd":function(t,s,e){},"276f":function(t,s,e){},"56d7":function(t,s,e){"use strict";e.r(s);e("cadf"),e("551c"),e("f751"),e("097d");var i=e("2b0e"),a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("header",[e("myHeader",{attrs:{seller:t.seller}})],1),e("div",{staticClass:"tab"},[e("ul",[e("li",[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),e("li",[e("router-link",{attrs:{to:"/ratings"}},[t._v("评价")])],1),e("li",[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)])]),e("keep-alive",[e("router-view",{attrs:{seller:t.seller}})],1)],1)},n=[],r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{attrs:{id:"header"}},[e("div",{staticClass:"header-wrap"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.seller.avatar,alt:""}})]),e("div",{staticClass:"header-content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),e("div",{staticClass:"descripticon"},[t._v(t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达")]),t.seller.supports?e("div",{staticClass:"support"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[0].type]}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t.seller.supports?e("div",{staticClass:"support-count",on:{click:t.showDetail}},[e("span",{staticClass:"number"},[t._v(t._s(t.seller.supports.length)+"个")]),e("span",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),e("div",{staticClass:"bulletin",on:{click:t.showDetail}},[e("span",{staticClass:"icon"}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.bulletin))]),e("span",{staticClass:"icon-keyboard_arrow_right"})]),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,alt:""}})]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"detail"},[e("div",{staticClass:"mask"}),e("div",{staticClass:"detail-wrap"},[e("div",{staticClass:"title"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"star"},[e("star",{attrs:{score:t.seller.score,size:"48"}})],1),e("div",{staticClass:"info"},[e("div",{staticClass:"info-title"},[e("span",{staticClass:"line"}),e("span",{staticClass:"text"},[t._v("优惠信息")]),e("span",{staticClass:"line"})]),t.seller.supports?e("ul",{staticClass:"info-list"},t._l(t.seller.supports,function(s,i){return e("li",{key:i},[e("span",{staticClass:"icon",class:t.classMap[s.type]}),e("span",{staticClass:"description"},[t._v(t._s(s.description))])])}),0):t._e()]),e("div",{staticClass:"detail-bulletin"},[e("div",{staticClass:"bulletin-title"},[e("span",{staticClass:"line"}),e("span",{staticClass:"text"},[t._v("商家公告")]),e("span",{staticClass:"line"})]),e("p",[t._v(t._s(t.seller.bulletin))])]),e("div",{staticClass:"close"},[e("span",{staticClass:"icon-close",on:{click:t.hideDetail}})])])])])],1)])},o=[],c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:t.starType},t._l(t.result,function(t,s){return e("span",{key:s,staticClass:"star-item",class:t})}),0)},l=[],u=5,d="on",p="half",f="off",v={props:["score","size"],computed:{starType:function(){return"star-"+this.size},result:function(){for(var t=[],s=Math.floor(2*this.score)/2,e=Math.floor(s),i=s-e,a=0;a<e;a++)t.push(d);i&&t.push(p);for(var n=t.length,r=0;r<u-n;r++)t.push(f);return t}}},h=v,_=(e("82c3"),e("2877")),C=Object(_["a"])(h,c,l,!1,null,null,null),m=C.exports,g={components:{star:m},props:["seller"],data:function(){return{classMap:[],isShow:!1}},created:function(){this.classMap=["decrease","discount","special","invoice","guarantee"]},methods:{showDetail:function(){this.isShow=!this.isShow},hideDetail:function(){this.isShow=!this.isShow}}},w=g,y=(e("7621"),Object(_["a"])(w,r,o,!1,null,"9b42f726",null)),b=y.exports,x=(e("28a5"),e("ac6a"),e("4917"),e("386d"),function(){var t=window.location.search,s={},e=/[?&][^?&]+=[^?&]+/g,i=t.match(e);return i&&i.forEach(function(t){var e=t.substring(1).split("="),i=decodeURIComponent(e[0]),a=decodeURIComponent(e[1]);s[i]=a}),s});x();var k={components:{myHeader:b},data:function(){return{seller:{id:function(){return x().id}()}}},created:function(){var t=this;this.$axios.get("/api/seller").then(function(s){t.seller=Object.assign(s.data.seller,t.seller)})}},T=k,S=(e("5c0b"),Object(_["a"])(T,a,n,!1,null,null,null)),$=S.exports,P=e("bc3a"),N=e.n(P),O=e("8c4f"),L=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[e("ul",t._l(t.goods,function(s,i){return e("li",{key:i,class:{current:t.currentIndex===i},on:{click:function(s){return t.selectFood(i)}}},[e("span",{staticClass:"text"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.type>=0,expression:"item.type >=0 "}],staticClass:"icon",class:t.classMap[s.type]}),e("span",{staticClass:"title"},[t._v(t._s(s.name))])])])}),0)]),e("div",{ref:"foodsWrapper",staticClass:"foods-wrapper"},[e("ul",t._l(t.goods,function(s,i){return e("li",{key:i,staticClass:"foods-list foods-list-hook"},[e("h2",{staticClass:"title"},[t._v(t._s(s.name))]),t._l(s.foods,function(s,i){return e("div",{key:i,staticClass:"food-item"},[e("div",{on:{click:function(e){return t.detaile(s)}}},[e("div",{staticClass:"item-left"},[e("img",{attrs:{src:s.icon}})]),e("div",{staticClass:"item-right"},[e("h2",{staticClass:"name"},[t._v(t._s(s.name))]),e("p",{staticClass:"desc"},[t._v(t._s(s.description))]),e("p",{staticClass:"desc"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(s.rating)+"%")])]),e("p",{staticClass:"price"},[e("span",{staticClass:"now"},[e("span",[t._v("￥")]),t._v("\n                  "+t._s(s.price)+"\n                ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:s.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[e("span",[t._v("￥")]),t._v("\n                  "+t._s(s.oldPrice)+"\n                ")])])])]),e("div",{staticClass:"cart-control"},[e("cartControl",{attrs:{food:s}})],1)])})],2)}),0)]),e("shopcart",{ref:"shopCart",attrs:{minPrice:t.seller.minPrice,deliveryPrice:t.seller.deliveryPrice,foodList:t.selectFoods}}),e("food",{ref:"food",attrs:{food:t.foodDetaile}})],1)},j=[],E=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shopcart"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-left"},[e("span",{staticClass:"cart",on:{click:t.showCartList}},[e("span",{staticClass:"icon",class:{active:t.foodList.length}},[e("i",{staticClass:"icon-shopping_cart"})])]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.totalNum>0,expression:"totalNum>0"}],staticClass:"count"},[t._v(t._s(t.totalNum))]),e("span",{staticClass:"price"},[t._v("￥"+t._s(t.totalPrice))]),e("span",{staticClass:"delivery-price"},[t._v("另须配送费￥"+t._s(t.deliveryPrice)+"元")])]),e("div",{staticClass:"content-right"},[0===t.totalPrice?e("span",[t._v("￥20元起送")]):t.totalPrice<t.minPrice?e("span",[t._v("还差￥"+t._s(t.minPrice-t.totalPrice)+"元起送")]):e("span",{staticClass:"active",on:{click:t.toPay}},[t._v("去结算")])]),e("transition",{attrs:{name:"fold"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"cart-list"},[e("div",{staticClass:"cart-content"},[e("div",{staticClass:"cart-title"},[e("span",{staticClass:"name"},[t._v("购物车")]),e("span",{staticClass:"empty",on:{click:t.empty}},[t._v("清空")])]),e("div",{ref:"listcontent",staticClass:"food-list"},[e("ul",t._l(t.foodList,function(s,i){return e("li",{directives:[{name:"show",rawName:"v-show",value:s.count>0,expression:"food.count>0"}],key:i,staticClass:"food-item"},[e("span",{staticClass:"foodname"},[t._v(t._s(s.name))]),e("span",[e("span",{staticClass:"foodprice"},[e("span",{staticClass:"icon"},[t._v("￥")]),t._v("\n                    "+t._s(s.price)+"\n                  ")]),e("span",{staticClass:"foodcount"},[t._v(t._s(s.count))])]),e("div",{staticClass:"cart-control"},[e("cartControl",{attrs:{food:s},on:{click:t.showCartList}})],1)])}),0)])])])]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"mask",on:{click:t.showCartList}})])],1),e("div",{staticClass:"ball-wrapper"},[e("transition-group",{attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},t._l(t.balls,function(t,s){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"ball.show"}],key:s,staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])}),0)],1)])},M=[],D=(e("c5f6"),e("1fba")),H=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{ref:"cartWrapper",staticClass:"cart-control-wrapper"},[e("transition",{attrs:{name:"move"}},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.count,expression:"food.count"}],staticClass:"decrease move-transition"},[t.food.count?e("span",{staticClass:"icon-remove_circle_outline inner",on:{click:t.decreaseCount}}):t._e()])]),t.food.count?e("span",{staticClass:"cont"},[t._v(t._s(t.food.count))]):t._e(),e("span",{staticClass:"icon-add_circle",on:{click:t.addCount}})],1)])},R=[],A=new i["a"],W={props:["food"],methods:{addCount:function(){this.food.count?this.food.count++:i["a"].set(this.food,"count",1),A.$emit("cart-add",this.$refs.cartWrapper)},decreaseCount:function(){this.food.count&&this.food.count--}}},F=W,z=(e("f85b"),Object(_["a"])(F,H,R,!1,null,"64702057",null)),Y=z.exports,B={components:{cartControl:Y},props:{minPrice:{type:Number},deliveryPrice:{type:Number},foodList:{type:Array,default:function(){return[{price:10,count:0}]}}},data:function(){return{showList:!1,balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},computed:{totalPrice:function(){for(var t=0,s=0;s<this.foodList.length;s++)t+=this.foodList[s].price*this.foodList[s].count;return t},totalNum:function(){for(var t=0,s=0;s<this.foodList.length;s++)t+=this.foodList[s].count;return t},show:function(){var t=this,s=this.showList;return s&&this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new D["a"](t.$refs.listcontent,{click:!0})}),0===this.totalNum?(this.showList=!1,!1):s}},methods:{showCartList:function(){this.totalNum>0&&(this.showList=!this.showList)},empty:function(){this.foodList.forEach(function(t){t.count=0}),this.showList=!1},drop:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.show=!0,e.el=t,void this.dropBalls.push(e)}},toPay:function(){alert("您一共消费 "+this.totalPrice+" RMB")},beforeEnter:function(t){var s=this.balls.length;while(s){s--;var e=this.balls[s];if(e.show){var i=e.el.getBoundingClientRect(),a=i.left+20,n=-(window.innerHeight-i.top-40);t.style.transform="translate3d(0,".concat(n,"px,0)");var r=t.querySelector(".inner-hook");r.style.transform="translate3d(".concat(a,"px,0,0)")}}},enter:function(t,s){t.offsetWidth;this.$nextTick(function(){var s=t.querySelector(".inner-hook");s.style.transform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)"}),setTimeout(function(){s()},400)},afterEnter:function(t){var s=this.dropBalls.shift();s&&(s.show=!1)}}},J=B,q=(e("1734"),Object(_["a"])(J,E,M,!1,null,"08e4dbd5",null)),I=q.exports,U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],ref:"food",staticClass:"food"},[e("div",{staticClass:"food-content"},[e("div",{staticClass:"image-header"},[e("img",{attrs:{src:t.food.image,alt:"",width:"100%"}}),e("div",{staticClass:"back",on:{click:t.hide}},[e("span",{staticClass:"icon-arrow_lift"})])]),e("div",{staticClass:"content"},[e("h1",{staticClass:"title"},[t._v(t._s(t.food.name))]),e("div",{staticClass:"detailfood"},[e("span",{staticClass:"sell-count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),e("span",{staticClass:"rating"},[t._v("好评率"+t._s(t.food.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[e("span",{staticClass:"sign"},[t._v("￥")]),t._v("\n            "+t._s(t.food.price)+"\n          ")]),e("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("￥"+t._s(t.food.oldPrice))])]),e("div",{staticClass:"cartcontrol-wrapper"},[e("cartcontrol",{attrs:{food:t.food}})],1),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count,expression:"!food.count"}],staticClass:"buy",on:{click:t.showCartControl}},[t._v("加入购物车")])])],1),e("split",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}]}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}],staticClass:"food-info"},[e("h2",[t._v("商品信息")]),e("p",[t._v(t._s(t.food.info))])]),e("split"),e("div",{staticClass:"rating"},[e("h2",{staticClass:"title"},[t._v("商品评价")]),e("selectRating",{attrs:{ratings:t.food.ratings},on:{"select-rating-type":t.selectRatingType,"toggle-text":t.toggleText}}),e("div",{staticClass:"rating-wrapper"},[e("ul",t._l(t.food.ratings,function(s,i){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.needShow(s.rateType,s.text),expression:"needShow(rating.rateType,rating.text)"}],key:i,staticClass:"rating-item"},[e("div",{staticClass:"user"},[e("span",{staticClass:"name"},[t._v(t._s(s.username))]),e("img",{staticClass:"avatar",attrs:{width:"12",height:"12",src:s.avatar,alt:""}})]),e("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(s.rateTime)))]),e("p",{staticClass:"text"},[e("span",{class:{"icon-thumb_up":0===s.rateType,"icon-thumb_down":1===s.rateType}}),t._v("\n                "+t._s(s.text)+"\n              ")])])}),0),t.food.ratings&&t.food.ratings.length?t._e():e("div",{staticClass:"no-ratings"},[t._v("暂无评价")])])],1)],1)])])},X=[],G=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"split"})},K=[],Q={},V=Q,Z=(e("11a6"),Object(_["a"])(V,G,K,!1,null,"2d034711",null)),tt=Z.exports,st=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.ratings?e("div",{staticClass:"ratingselect"},[e("div",{staticClass:"rating-type"},[e("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(s){return t.select(2)}}},[t._v("全部"+t._s(t.ratings.length))]),e("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(s){return t.select(0)}}},[t._v("推荐"+t._s(t.recummend.length))]),e("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(s){return t.select(1)}}},[t._v("吐槽"+t._s(t.negative.length))])]),e("div",{staticClass:"switch",class:{on:t.isActive},on:{click:t.showAll}},[e("span",{staticClass:"icon-check_circle"}),e("span",{staticClass:"text"},[t._v("只看有内容的评价")])])]):t._e()},et=[],it={props:{ratings:{type:Array,default:function(){return[]}}},data:function(){return{isActive:!0,selectType:2}},computed:{recummend:function(){var t=[];return this.ratings&&this.ratings.forEach(function(s){0===s.rateType&&t.push(s)}),t},negative:function(){var t=[];return this.ratings&&this.ratings.forEach(function(s){1===s.rateType&&t.push(s)}),t}},methods:{showAll:function(){this.isActive=!this.isActive,this.$emit("toggle-text",this.isActive)},select:function(t){this.selectType=t,this.$emit("select-rating-type",t)}}},at=it,nt=(e("72fb"),Object(_["a"])(at,st,et,!1,null,"89d14022",null)),rt=nt.exports,ot={components:{cartcontrol:Y,split:tt,selectRating:rt},props:{food:{type:Object}},data:function(){return{showList:!1,selectType:2,toggleContent:!0}},methods:{needShow:function(t,s){return!(!s&&this.toggleContent)&&(2===this.selectType||t===this.selectType)},show:function(){var t=this;this.showList=!0,this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new D["a"](t.$refs.food,{click:!0})})},hide:function(){this.showList=!1},showCartControl:function(){this.$set(this.food,"count",1)},selectRatingType:function(t){var s=this;this.selectType=t,this.$nextTick(function(){s.scroll.refresh()})},toggleText:function(t){var s=this;this.toggleContent=t,this.$nextTick(function(){s.scroll.refresh()})}},filters:{formatDate:function(t){var s=new Date(t),e={year:s.getFullYear(),month:s.getMonth()+1,day:s.getDay(),hour:s.getHours(),minute:s.getMinutes()},i=" ".concat(e.year,"-").concat(e.month,"-").concat(e.day," ").concat(e.hour,":").concat(e.minute," ");return i}}},ct=ot,lt=(e("9db5"),Object(_["a"])(ct,U,X,!1,null,"b5db2cd2",null)),ut=lt.exports,dt={props:{seller:{type:Object}},components:{shopcart:I,cartControl:Y,food:ut},data:function(){return{goods:[],classMap:["decrease","discount","special","invoice","guarantee"],HeightScroll:[],scrollY:0,foodDetaile:{}}},mounted:function(){var t=this;A.$on("cart-add",function(s){t._drop(s)})},created:function(){var t=this;this.$axios.get("/api/goods").then(function(s){0==s.data.errno&&(t.goods=s.data.goods,t.$nextTick(function(){t._initScroll(),t._calcHeight()}))}).catch(function(t){console.log(t)})},computed:{currentIndex:function(){for(var t=0;t<this.HeightScroll.length;t++){var s=this.HeightScroll[t],e=this.HeightScroll[t+1];if(!e||this.scrollY<e&&this.scrollY>=s)return t}return 0},selectFoods:function(){var t=[];return this.goods&&this.goods.forEach(function(s){s.foods.forEach(function(s){s.count&&t.push(s)})}),t}},methods:{_initScroll:function(){var t=this;this.menuScroll=new D["a"](this.$refs.menuWrapper,{click:!0}),this.foodsScroll=new D["a"](this.$refs.foodsWrapper,{click:!0,probeType:3}),this.foodsScroll.on("scroll",function(s){t.scrollY=Math.abs(Math.floor(s.y))})},_calcHeight:function(){var t=this.$refs.foodsWrapper.querySelectorAll(".foods-list-hook"),s=0;this.HeightScroll.push(s);for(var e=0;e<t.length;e++)s+=t[e].clientHeight,this.HeightScroll.push(s)},selectFood:function(t){var s=this.$refs.foodsWrapper.querySelectorAll(".foods-list-hook"),e=s[t];this.foodsScroll.scrollToElement(e,300)},_drop:function(t){var s=this;this.$nextTick(function(){s.$refs.shopCart.drop(t)})},detaile:function(t){this.$refs.food.show(),this.foodDetaile=t}}},pt=dt,ft=(e("b040"),Object(_["a"])(pt,L,j,!1,null,"7374ef0d",null)),vt=ft.exports,ht=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"ratings",staticClass:"ratings"},[e("div",{staticClass:"rating-content"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"overview-left"},[e("div",{staticClass:"score"},[t._v(t._s(t.seller.score))]),e("div",{staticClass:"title"},[t._v("综合评分")]),e("div",{staticClass:"rank"},[t._v("高于周边商家"+t._s(t.seller.rankRate))])]),e("div",{staticClass:"overview-right"},[e("div",{staticClass:"score-wrapper"},[e("div",[e("span",{staticClass:"title"},[t._v("服务态度")]),e("span",{staticClass:"star"},[e("star",{attrs:{size:"36",score:t.seller.serviceScore}})],1),e("span",{staticClass:"score"},[t._v(t._s(t.seller.serviceScore))])]),e("div",[e("span",{staticClass:"title"},[t._v("商品评价")]),e("span",{staticClass:"star"},[e("star",{attrs:{size:"36",score:t.seller.foodScore}})],1),e("span",{staticClass:"score"},[t._v(t._s(t.seller.foodScore))])])]),e("div",{staticClass:"delivery-wrapper"},[e("span",{staticClass:"title"},[t._v("送达时间")]),e("span",{staticClass:"delivery"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),e("split"),e("selectRating",{attrs:{ratings:t.ratings},on:{"select-rating-type":t.selectRatingType,"toggle-text":t.toggleText}}),e("div",{staticClass:"rating-wrapper"},[e("ul",t._l(t.ratings,function(s,i){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.needShow(s.rateType,s.text),expression:"needShow(rating.rateType,rating.text)"}],key:i,staticClass:"rating-item"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:s.avatar,alt:""}})]),e("div",{staticClass:"content"},[e("span",{staticClass:"name"},[t._v(t._s(s.username))]),e("div",{staticClass:"star-wrapper"},[e("star",{staticClass:"star",attrs:{size:24,score:s.score}}),e("span",{directives:[{name:"show",rawName:"v-show",value:s.deliveryTime,expression:"rating.deliveryTime"}],staticClass:"delivery"},[t._v(t._s(s.deliveryTime)+"分钟送达")])],1),e("p",{staticClass:"text"},[t._v(t._s(s.text))]),e("div",{staticClass:"recommend"},[e("span",{class:{"icon-thumb_up":0==s.rateType,"icon-thumb_down":1==s.rateType}}),t._l(s.recommend,function(s,i){return e("span",{key:i,staticClass:"item"},[t._v(t._s(s))])})],2),e("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(s.rateTime)))])])])}),0)])],1)])},_t=[],Ct={props:{seller:{type:Object}},data:function(){return{ratings:null,selectType:2,toggleContent:!0}},components:{shopcart:I,star:m,split:tt,selectRating:rt},created:function(){var t=this;this.$axios.get("/api/ratings").then(function(s){0===s.data.errno&&t.$nextTick(function(){t.ratings=s.data.ratings,t.scroll=new D["a"](t.$refs.ratings,{click:!0})})})},methods:{needShow:function(t,s){return!(!s&&this.toggleContent)&&(2===this.selectType||t===this.selectType)},selectRatingType:function(t){var s=this;this.selectType=t,this.$nextTick(function(){s.scroll.refresh()})},toggleText:function(t){var s=this;this.toggleContent=t,this.$nextTick(function(){s.scroll.refresh()})}},filters:{formatDate:function(t){var s=new Date(t),e={year:s.getFullYear(),month:s.getMonth()+1,day:s.getDay(),hour:s.getHours(),minute:s.getMinutes()},i=" ".concat(e.year,"-").concat(e.month,"-").concat(e.day," ").concat(e.hour,":").concat(e.minute," ");return i}}},mt=Ct,gt=(e("d83f"),Object(_["a"])(mt,ht,_t,!1,null,"2368d724",null)),wt=gt.exports,yt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"seller",staticClass:"seller"},[e("div",{staticClass:"seller-content"},[e("div",{staticClass:"overview"},[e("h1",{staticClass:"title"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"desc"},[e("star",{staticClass:"star",attrs:{size:36,score:t.seller.score}}),e("span",{staticClass:"text"},[t._v("("+t._s(t.seller.ratingCount)+")")]),e("span",{staticClass:"text"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])],1),e("ul",{staticClass:"remark"},[e("li",{staticClass:"block"},[e("h2",[t._v("起送价")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.minPrice))]),t._v("元\n          ")])]),e("li",{staticClass:"block"},[e("h2",[t._v("商家配送")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryPrice))]),t._v("元\n          ")])]),e("li",{staticClass:"block"},[e("h2",[t._v("平均配送时间")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryTime))]),t._v("分钟\n          ")])])]),e("div",{staticClass:"favorite",on:{click:t.toggleFavorite}},[e("span",{staticClass:"icon-favorite",class:{active:t.favorite}}),e("span",{staticClass:"text"},[t._v(t._s(t.favoriteText))])])]),e("split"),e("div",{staticClass:"bulletin"},[e("h1",{staticClass:"title"},[t._v("公告与活动")]),e("div",{staticClass:"content-wrapper"},[e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])]),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s,i){return e("li",{key:i,staticClass:"support-item"},[e("span",{staticClass:"icon",class:t.classMap[t.seller.supports[i].type]}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[i].description))])])}),0):t._e()]),e("split"),e("div",{staticClass:"pics"},[e("div",{staticClass:"title"},[t._v("商家实景")]),e("div",{ref:"picWrapper",staticClass:"pic-wrapper"},[e("ul",{ref:"picList",staticClass:"pic-list"},t._l(t.seller.pics,function(t,s){return e("li",{key:s,staticClass:"pic-item"},[e("img",{attrs:{src:t,width:"120",height:"120",alt:""}})])}),0)])]),e("split"),e("div",{staticClass:"info"},[e("h1",{staticClass:"title"},[t._v("商家信息")]),e("ul",t._l(t.seller.infos,function(s,i){return e("li",{key:i,staticClass:"info-item"},[t._v(t._s(s))])}),0)])],1)])},bt=[];function xt(t,s,e){var i=window.localStorage.__seller__;i?(i=JSON.parse(i),i[t]||(i[t]={})):(i={},i[t]={}),i[t][s]=e,window.localStorage.__seller__=JSON.stringify(i)}function kt(t,s,e){var i=window.localStorage.__seller__;if(!i)return e;if(i=JSON.parse(i)[t],!i)return e;var a=i[s];return a||e}var Tt={props:{seller:{type:Object}},data:function(){var t=this;return{favorite:function(){return kt(t.seller.id,"favorite",!1)}()}},computed:{favoriteText:function(){return this.favorite?"已收藏":"收藏"}},created:function(){this.classMap=["decrease","discount","special","invoice","guarantee"]},watch:{seller:function(){var t=this;this.$nextTick(function(){t._initPics()})}},mounted:function(){var t=this;this.$nextTick(function(){t._initScroll(),t._initPics()})},methods:{_initScroll:function(){this.scroll=new D["a"](this.$refs.seller,{click:!0})},_initPics:function(){if(this.seller.pics){var t=120,s=6,e=(t+s)*this.seller.pics.length-s;this.$refs.picList.style.width=e+"px",this.picScroll=new D["a"](this.$refs.picWrapper,{scrollX:!0,eventPassthrough:"vertical"})}},toggleFavorite:function(){this.favorite=!this.favorite,xt(this.seller.id,"favorite",this.favorite)}},components:{star:m,split:tt}},St=Tt,$t=(e("cfb4"),Object(_["a"])(St,yt,bt,!1,null,null,null)),Pt=$t.exports;i["a"].use(O["a"]);var Nt=new O["a"]({routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:vt},{path:"/ratings",component:wt},{path:"/seller",component:Pt}]});i["a"].prototype.$axios=N.a,i["a"].config.productionTip=!1,new i["a"]({router:Nt,render:function(t){return t($)}}).$mount("#app")},"5c0b":function(t,s,e){"use strict";var i=e("5e27"),a=e.n(i);a.a},"5e27":function(t,s,e){},"64fc":function(t,s,e){},"72fb":function(t,s,e){"use strict";var i=e("7375"),a=e.n(i);a.a},7375:function(t,s,e){},7621:function(t,s,e){"use strict";var i=e("be2a"),a=e.n(i);a.a},7686:function(t,s,e){},"82c3":function(t,s,e){"use strict";var i=e("64fc"),a=e.n(i);a.a},"9db5":function(t,s,e){"use strict";var i=e("276f"),a=e.n(i);a.a},b040:function(t,s,e){"use strict";var i=e("26dd"),a=e.n(i);a.a},be2a:function(t,s,e){},cd23:function(t,s,e){},cfb4:function(t,s,e){"use strict";var i=e("cd23"),a=e.n(i);a.a},d10e:function(t,s,e){},d83f:function(t,s,e){"use strict";var i=e("7686"),a=e.n(i);a.a},f85b:function(t,s,e){"use strict";var i=e("d10e"),a=e.n(i);a.a},fde7:function(t,s,e){},fffe:function(t,s,e){}});
//# sourceMappingURL=app.37f511cd.js.map